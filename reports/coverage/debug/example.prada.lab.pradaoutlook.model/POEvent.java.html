<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>POEvent.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">example.prada.lab.pradaoutlook.model</a> &gt; <span class="el_source">POEvent.java</span></div><h1>POEvent.java</h1><pre class="source lang-java linenums">package example.prada.lab.pradaoutlook.model;

import android.content.ContentValues;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.graphics.Color;
import android.support.annotation.ColorInt;
import android.support.annotation.DrawableRes;
import android.support.annotation.LayoutRes;
import android.text.TextUtils;

import java.util.Date;
import com.github.sundeepk.compactcalendarview.domain.Event;

import example.prada.lab.pradaoutlook.R;
import example.prada.lab.pradaoutlook.db.OutlookDbHelper;

/**
 * Created by prada on 10/27/16.
 *
 * this data object represent the event's detail
 */
public class POEvent {

    public static final String LABEL_OOO = &quot;out-of-office&quot;;
    public static final String LABEL_OFFICE = &quot;office&quot;;
    public static final String LABEL_BIRTHDAY = &quot;birthday&quot;;

    private final String mTitle;
    private final String mLabel;
    private final Date mFrom;
    private final Date mTo;
    private Long mId;

    /**
     * create the event object
     *
     * @param title the event's title, it should not be null or empty
     * @param label the event's label, it present the event's category
     * @param from the event's start time, it should not be null, and it should be less then {@link POEvent#mTo}
     * @param to the event's end time, it should not be null, and it should large then {@link POEvent#mFrom}
     * @throws IllegalArgumentException
     */
<span class="fc" id="L44">    public POEvent(String title, String label, Date from, Date to) throws IllegalArgumentException {</span>
<span class="fc" id="L45">        mTitle = title;</span>
<span class="fc" id="L46">        mLabel = label;</span>
<span class="fc" id="L47">        mFrom = from;</span>
<span class="fc" id="L48">        mTo = to;</span>
<span class="fc" id="L49">        mId = -1L;</span>
<span class="fc" id="L50">        verify();</span>
<span class="fc" id="L51">    }</span>

<span class="fc" id="L53">    private POEvent(ContentValues values) throws IllegalArgumentException {</span>
<span class="fc" id="L54">        mId = values.getAsLong(OutlookDbHelper.EVENT_ID);</span>
<span class="fc" id="L55">        mTitle = values.getAsString(OutlookDbHelper.EVENT_TITLE);</span>
<span class="fc" id="L56">        mLabel = values.getAsString(OutlookDbHelper.EVENT_LABEL);</span>
<span class="fc" id="L57">        mFrom = new Date(values.getAsLong(OutlookDbHelper.EVENT_START_TIME));</span>
<span class="fc" id="L58">        mTo = new Date(values.getAsLong(OutlookDbHelper.EVENT_END_TIME));</span>
<span class="fc" id="L59">        verify();</span>
<span class="fc" id="L60">    }</span>

    private void verify() throws IllegalArgumentException {
<span class="fc bfc" id="L63" title="All 2 branches covered.">        if (TextUtils.isEmpty(mTitle)) {</span>
<span class="fc" id="L64">            throw new IllegalArgumentException(&quot;title should not be null or empty&quot;);</span>
        }
<span class="fc bfc" id="L66" title="All 2 branches covered.">        if (TextUtils.isEmpty(mLabel)) {</span>
<span class="fc" id="L67">            throw new IllegalArgumentException(&quot;label should not be null or empty&quot;);</span>
        }
<span class="fc bfc" id="L69" title="All 4 branches covered.">        if (mFrom == null || mTo == null) {</span>
<span class="fc" id="L70">            throw new IllegalArgumentException(&quot;the date range should not be null, but the from = &quot; + mFrom + &quot;, to = &quot; + mTo);</span>
        }
<span class="fc bfc" id="L72" title="All 2 branches covered.">        if (mFrom.after(mTo)) {</span>
<span class="fc" id="L73">            throw new IllegalArgumentException(&quot;the date range is wrong, but the from = &quot; + mFrom + &quot;, to = &quot; + mTo);</span>
        }
<span class="fc" id="L75">    }</span>

    public String getTitle() {
<span class="fc" id="L78">        return mTitle;</span>
    }

    public String getLabel() {
<span class="fc" id="L82">        return mLabel;</span>
    }

    public Date getFrom() {
<span class="fc" id="L86">        return mFrom;</span>
    }

    public Date getTo() {
<span class="fc" id="L90">        return mTo;</span>
    }

    public Event toEvent() {
<span class="fc" id="L94">        return new Event(getColorRes(), getFrom().getTime(), this);</span>
    }

    private @ColorInt int getColorRes() {
<span class="pc bpc" id="L98" title="13 of 16 branches missed.">        switch (mLabel == null ? &quot;&quot; : mLabel) {</span>
            case LABEL_OOO:
<span class="nc" id="L100">                return Color.parseColor(&quot;#AED581&quot;);</span>
            case LABEL_BIRTHDAY:
<span class="nc" id="L102">                return Color.parseColor(&quot;#F06292&quot;);</span>
            case LABEL_OFFICE:
<span class="nc" id="L104">                return Color.parseColor(&quot;#7986CB&quot;);</span>
            default:
<span class="fc" id="L106">                return Color.parseColor(&quot;#666666&quot;);</span>
        }
    }

    public @DrawableRes int getLabelResourceId() {
<span class="nc bnc" id="L111" title="All 16 branches missed.">        switch (mLabel == null ? &quot;&quot; : mLabel) {</span>
            case LABEL_OOO:
<span class="nc" id="L113">                return R.drawable.label_ooo;</span>
            case LABEL_BIRTHDAY:
<span class="nc" id="L115">                return R.drawable.label_birthday;</span>
            case LABEL_OFFICE:
<span class="nc" id="L117">                return R.drawable.label_office;</span>
            default:
<span class="nc" id="L119">                return R.drawable.label_others;</span>
        }
    }

    /**
     * create the event object from the cursor
     * @param cursor the cursor object that point to the data we want to convert.
     * @return the data object with mapped data from the cursor
     */
    public static POEvent createFromCursor(Cursor cursor) {
<span class="fc bfc" id="L129" title="All 2 branches covered.">        if (cursor == null) {</span>
<span class="fc" id="L130">            throw new IllegalArgumentException(&quot;the cursor should not be null&quot;);</span>
        }
<span class="fc" id="L132">        ContentValues values = new ContentValues();</span>
<span class="fc" id="L133">        DatabaseUtils.cursorRowToContentValues(cursor, values);</span>
<span class="fc" id="L134">        return new POEvent(values);</span>
    }

    /**
     * create the content value object for the content provider operation.
     * @return a content value object has the event's data
     */
    public ContentValues getContentValues() {
<span class="fc" id="L142">        ContentValues cv = new ContentValues();</span>
<span class="fc" id="L143">        cv.put(OutlookDbHelper.EVENT_TITLE, mTitle);</span>
<span class="fc" id="L144">        cv.put(OutlookDbHelper.EVENT_LABEL, mLabel);</span>
<span class="fc" id="L145">        cv.put(OutlookDbHelper.EVENT_START_TIME, mFrom.getTime());</span>
<span class="fc" id="L146">        cv.put(OutlookDbHelper.EVENT_END_TIME, mTo.getTime());</span>
<span class="fc" id="L147">        return cv;</span>
    }

    public Long getId() {
<span class="fc" id="L151">        return mId;</span>
    }

    @Override
    public boolean equals(Object o) {
<span class="fc bfc" id="L156" title="All 2 branches covered.">        if (this == o) return true;</span>
<span class="pc bpc" id="L157" title="2 of 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>

<span class="fc" id="L159">        POEvent poEvent = (POEvent) o;</span>

<span class="pc bpc" id="L161" title="3 of 6 branches missed.">        if (mTitle != null ? !mTitle.equals(poEvent.mTitle) : poEvent.mTitle != null) return false;</span>
<span class="pc bpc" id="L162" title="3 of 6 branches missed.">        if (mLabel != null ? !mLabel.equals(poEvent.mLabel) : poEvent.mLabel != null) return false;</span>
<span class="pc bpc" id="L163" title="3 of 6 branches missed.">        if (mFrom != null ? !mFrom.equals(poEvent.mFrom) : poEvent.mFrom != null) return false;</span>
<span class="pc bpc" id="L164" title="3 of 6 branches missed.">        if (mTo != null ? !mTo.equals(poEvent.mTo) : poEvent.mTo != null) return false;</span>
<span class="pc bpc" id="L165" title="3 of 4 branches missed.">        return mId != null ? mId.equals(poEvent.mId) : poEvent.mId == null;</span>

    }

    @Override
    public int hashCode() {
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">        int result = mTitle != null ? mTitle.hashCode() : 0;</span>
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">        result = 31 * result + (mLabel != null ? mLabel.hashCode() : 0);</span>
<span class="pc bpc" id="L173" title="1 of 2 branches missed.">        result = 31 * result + (mFrom != null ? mFrom.hashCode() : 0);</span>
<span class="pc bpc" id="L174" title="1 of 2 branches missed.">        result = 31 * result + (mTo != null ? mTo.hashCode() : 0);</span>
<span class="pc bpc" id="L175" title="1 of 2 branches missed.">        result = 31 * result + (mId != null ? mId.hashCode() : 0);</span>
<span class="fc" id="L176">        return result;</span>
    }

    /**
     * updating the event id, the id should be the same as the id in the SQLite database
     *
     * @param id the row id that provided by SQLite database
     * @throws IllegalArgumentException when {@code id &lt;= 0}
     */
    public void setId(long id) {
<span class="fc bfc" id="L186" title="All 2 branches covered.">        if (id &lt;= 0) {</span>
<span class="fc" id="L187">            throw new IllegalArgumentException(&quot;the event id should be over 0&quot;);</span>
        }
<span class="fc" id="L189">        mId = id;</span>
<span class="fc" id="L190">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.2.1</div></body></html>